%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-8-1}Development Release Series 8.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is the development release series of HTCondor.
The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-8-1-2}Version 8.1.2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item HTCondor version 8.1.2 not yet released.
%\item HTCondor version 8.1.2 released on Month Date, 2013.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Email alerts about file transfers taking longer than
\Macro{MAX\_TRANSFER\_QUEUE\_AGE} are now grouped together
to reduce the number of email messages that are sent.

\item Floating point values in ClassAds are now printed in a more
human-readable format while retaining 64-bit double precision.
In version 8.1.1, these values were always printed in scientific
notation.
\Ticket{3928}

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item If a standard universe job exited and never used a checkpoint
server, two spurious error messages would be logged to the 
SchedLog, as it tried to remove the old checkpoint images from the
non-existent checkpoint server.  This bug has been fixed.
\Ticket{3919}

\item If the config knob STARTER\_RLIMIT\_AS is set to the default
value, there is no limit.  However, in this case, we logged that the
limit was set to 0 mb, which means ulimited to the kernel, but
was confusing.  Now, no message is logged in the default case.
\Ticket{3914}

\item Improved how the \condor{schedd} notifies the \condor{shadow}
and \condor{gridmanager} about modifications to job ads made via
\condor{qedit}.
\Ticket{3909}

\item The grid universe now uses the correct executable file when
\SubmitCmd{copy\_to\_spool} is set to \Expr{True}.
Previously, the executable file named in the submit file would be copied
to the remote server, rather than the copy stored in the spool directory.
\Ticket{3589}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-8-1-1}Version 8.1.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item HTCondor version 8.1.1 released on September 17, 2013.
This release contains all bug fixes from the stable release version 8.0.2.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Reduced the number of calls to the service when managing EC2 jobs. This
should increase the number of EC2 jobs HTCondor can manage on a given service
without overloading it.
\Ticket{3683}

\item When configuration variable \Macro{USE\_SHARED\_PORT} is \Expr{True},
\Macro{SHARED\_PORT} will now be automatically added to \Macro{DAEMON\_LIST}.
To disable this new behavior, set the new configuration variable:
\begin{verbatim}
  AUTO_INSERT_SHARED_PORT_IN_DAEMON_LIST = False
\end{verbatim}
\Ticket{3799}

\item Floating point values in ClassAds are now printed as 64-bit
double precision values when sent over the network, written to disk, and
displayed using the \Opt{-long} or \Opt{-autoformat} options of
\Condor{status} and \Condor{q}.
\Ticket{3363}

\item In the Pegasus/DAGMan workflow metrics,
as documented in section ~\ref{sec:DAGMetrics},
the two metrics
\Expr{dagman\_id} and \Expr{parent\_dagman\_id} are now reported
as the \Attr{ClusterId} of the \Condor{dagman} job.  This
eliminates any privacy concerns with reporting the \Condor{schedd} 
daemon's address,
which includes the submit machine's IP address.

\item The python bindings now can perform the equivalent of 
\Condor{ping} as a part of the \texttt{SecMan} object.
\Ticket{3857}

\item The \Condor{gridmanager} and \Condor{ft-gahp} now create
dynamic security session for performing file transfers.
Previously, the security configuration had to be set in a special
way for file transfers with the \Condor{ft-gahp} to work.
\Ticket{3536}

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item The new configuration variable \Macro{USE\_RESOURCE\_REQUEST\_COUNTS}
is a boolean value that defaults to \Expr{True}, 
reducing the latency of negotiation 
when there are many jobs next to each other in the queue 
with the same auto cluster, and many matches are being made.
\Ticket{3585}

\item Four new machine ClassAd attributes are advertised.
\Attr{TotalJobStarts} is the total number of jobs started by 
this \Condor{startd} daemon since it booted. 
\Attr{RecentTotalJobStarts} is the number of jobs started in the
last twenty minutes.  
Similarly, \Attr{TotalPreemptions} is
the number of jobs preempted since the \Condor{startd} daemon started,
and \Attr{RecentTotalPreemptions} is 
the number in the last 20 minutes.
\Ticket{3712}

\item \Macro{FILE\_TRANSFER\_DISK\_LOAD\_THROTTLE} now accepts tabs in addition to spaces as delimiters.
\Ticket{3798}

\item Configuration variable \Macro{VALID\_SPOOL\_FILES} has been expanded
to accept a single asterisk wild card character in each listed file name.
\Ticket{3764}

\item The new configuration variable \Macro{GAHP\_DEBUG\_HIDE\_SENSITIVE\_DATA}
is a boolean value that defaults to hiding sensitive data 
such as security keys and passwords
when communication with a GAHP server is written to a daemon log.
\Ticket{3536}

\item The default value of configuration variable 
\Macro{ENABLE\_CLASSAD\_CACHING} has changed to \Expr{True} for all
daemons other than the \Condor{shadow}, \Condor{starter}, and \Condor{master}.
\Ticket{3441}

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item The \Condor{gridmanager} now does proper failure recovery when
submitting EC2 grid universe jobs to services that do not support 
the EC2 ClientToken parameter.
Previously, if there was a failure when submitting jobs to OpenStack
or Eucalyptus, the jobs could be submitted twice.
\Ticket{3682}

\item Fixed the printing of nested ClassAds, so that the nested ClassAds
can be read back properly.
\Ticket{3772}

\item Fixed a bug between the \Condor{gridmanager} and \Condor{ft-gahp}
that caused file transfers to fail if one of the two daemons was older
than version 8.1.0.
\Ticket{3856}

\item Fixed a bug that caused substitution in configuration variable
evaluation to ignore per-daemon overrides. 
This is a long standing bug that may result in subtle changes
to the way your configuration files are processed.
An example of how substitution works with the per-daemon overrides
is in section \ref{sec:Config-File-Macros}.
\Ticket{3822}

\item Fixed a bug that caused the command
\begin{verbatim}
  condor_submit -
\end{verbatim}
to be interpreted as an interactive submit,
rather than a request to read input from \File{stdin}.
\Condor{qsub} was also modified to be immune to this bug,
such that it will still work with other versions of HTCondor containing
the bug.
\Ticket{3902}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}
\item DAGMan recovery mode does not work for Pegasus-generated SUBDAGs.
For SUBDAGs, doing \Condor{hold} or \Condor{release} on
the \Condor{dagman} job, or stopping and re-starting the
\Condor{schedd} with the DAGMan
job in the queue will result in failure of the DAG.  This can be
avoided by doing a \Condor{rm} of the DAGMan job, which produces a Rescue
DAG, and re-submitting the DAG; the Rescue DAG is automatically run.
This bug was introduced in HTCondor version 8.0.1, and it also appears
in versions 8.0.2, 8.1.0, and 8.1.1.
\Ticket{3882}

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-8-1-0}Version 8.1.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item HTCondor version 8.1.0 released on August 5, 2013.
This release contains all bug fixes from the stable release version 8.0.1.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added support for publishing information about an HTCondor pool 
to \TM{Ganglia}.
See section~\ref{sec:Config-gangliad} on 
page~\pageref{sec:Config-gangliad} for configuration variable details.
\Ticket{3515}

\item Improved the performance of the \Condor{collector} daemon when running
at sites that do not observe daylight savings time.
\Ticket{2898}

\item \Condor{q}, \Condor{rm}, \Condor{status} and \Condor{qedit} are now 
more consistent in the way they handle the \Opt{-constraint} option.
\Ticket{1156}

\item The new \Condor{dagman\_metrics\_reporter} executable
with manual page at ~\pageref{man-condor-dagman-metrics-reporter},
reports metrics for DAGMan workflows running under Pegasus.  \Condor{dagman}
now generates an output file of the relevant metrics,
as described at ~\pageref{sec:DAGMetrics}.
\Ticket{3532}

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item The default value of configuration variable
\Macro{COLLECTOR\_MAX\_FILE\_DESCRIPTORS} has changed to 10240,
and the default value of configuration variable 
\Macro{SCHEDD\_MAX\_FILE\_DESCRIPTORS} has changed to 4096.
This increases the scalability of the default configuration.
\Ticket{3626}

\item The new configuration variable
\Macro{FILE\_TRANSFER\_DISK\_LOAD\_THROTTLE} enables dynamic
adjustment of the level of file transfer concurrency in order to
keep the disk load generated by transfers below a specified level.
Supporting this new feature are configuration variables
\Macro{FILE\_TRANSFER\_DISK\_LOAD\_THROTTLE\_WAIT\_BETWEEN\_INCREMENTS},
\Macro{FILE\_TRANSFER\_DISK\_LOAD\_THROTTLE\_SHORT\_HORIZON}, and
\Macro{FILE\_TRANSFER\_DISK\_LOAD\_THROTTLE\_LONG\_HORIZON}.
\Ticket{3613}

\item The following new \Condor{schedd} ClassAd attributes are for
monitoring file transfer activity:
\AdAttr{TransferQueueMBWaitingToDownload},
\AdAttr{TransferQueueMBWaitingToUpload},
\AdAttr{FileTransferDiskThrottleLevel},
\AdAttr{FileTransferDiskThrottleHigh}, and
\AdAttr{FileTransferDiskThrottleLow}.
\Ticket{3613}

\item The default value for the configuration variable
\Macro{PASSWD\_CACHE\_REFRESH} has been changed from 300 seconds to
72000 seconds (20 hours).
\Ticket{3723}

\item The new configuration variables
\Macro{DAGMAN\_PEGASUS\_REPORT\_METRICS} and
\Macro{DAGMAN\_PEGASUS\_REPORT\_TIMEOUT}
set defaults used by the new \Condor{dagman\_metrics\_reporter} executable,
which reports metrics for DAGMan jobs running under Pegasus.
\Ticket{3532}
\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item HTCondor version 8.0.0 had an unintended change in the Chirp 
wire protocol.
This change caused \Condor{chirp} with the \Opt{put} option
to fail when the execute node
was running HTCondor version 7.8.x or earlier versions. 
HTCondor 8.0.1 and later
versions will now send the original wire protocol, and accept either the
original protocol, or the variant that HTCondor version 8.0.0 sends.
\Ticket{3735}

\item Fixed a bug that could cause the daemons to crash on Unix platforms,
if the operating system reported that a job owner's account 
did not exist, for example due to a temporary NIS or LDAP failure.
\Ticket{3723}

\item Fixed a bug that resulted in a misleading error message when
\Condor{status} with the \Opt{-constraint} option specified a constraint 
that could not be parsed.
\Ticket{1319}

\item Fixed a typo in the output of \Condor{q},
where a period was erroneously present within a heading.
\Ticket{3703}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


